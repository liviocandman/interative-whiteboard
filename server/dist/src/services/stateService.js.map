{"version":3,"sources":["../../../src/services/stateService.ts"],"sourcesContent":["import { pubClient } from \"../config/redis\";\r\n\r\nexport async function saveCanvasState(roomId: string, state: any, ttlSeconds = 3600) {\r\n  await pubClient.set(\r\n    `room:${roomId}:state`,\r\n    JSON.stringify(state),\r\n    { EX: ttlSeconds }\r\n  );\r\n}\r\n\r\nexport async function getCanvasState(roomId: string) {\r\n  const serialized = await pubClient.get(`room:${roomId}:state`);\r\n  return serialized ? JSON.parse(serialized) : null;\r\n}\r\n\r\nexport async function deleteCanvasState(roomId: string) {\r\n  await pubClient.del(`room:${roomId}:state`);\r\n}\r\n"],"names":["deleteCanvasState","getCanvasState","saveCanvasState","roomId","state","ttlSeconds","pubClient","set","JSON","stringify","EX","serialized","get","parse","del"],"mappings":";;;;;;;;;;;QAesBA;eAAAA;;QALAC;eAAAA;;QARAC;eAAAA;;;uBAFI;AAEnB,eAAeA,gBAAgBC,MAAc,EAAEC,KAAU,EAAEC,aAAa,IAAI;IACjF,MAAMC,gBAAS,CAACC,GAAG,CACjB,CAAC,KAAK,EAAEJ,OAAO,MAAM,CAAC,EACtBK,KAAKC,SAAS,CAACL,QACf;QAAEM,IAAIL;IAAW;AAErB;AAEO,eAAeJ,eAAeE,MAAc;IACjD,MAAMQ,aAAa,MAAML,gBAAS,CAACM,GAAG,CAAC,CAAC,KAAK,EAAET,OAAO,MAAM,CAAC;IAC7D,OAAOQ,aAAaH,KAAKK,KAAK,CAACF,cAAc;AAC/C;AAEO,eAAeX,kBAAkBG,MAAc;IACpD,MAAMG,gBAAS,CAACQ,GAAG,CAAC,CAAC,KAAK,EAAEX,OAAO,MAAM,CAAC;AAC5C"}